---
import LanguageIcon from "@/icons/languages/LanguageIcon.astro";

const tools = [
  { name: "HTML Formatter", url: "/html", type: "FMT" },
  { name: "HTML Minifier", url: "/html", type: "MIN" },
  { name: "CSS Formatter", url: "/css", type: "FMT" },
  { name: "CSS Minifier", url: "/css", type: "MIN" },
  { name: "JS Formatter", url: "/javascript", type: "FMT" },
  { name: "JS Minifier", url: "/javascript", type: "MIN" },
  { name: "JSON Formatter", url: "/json", type: "FMT" },
  { name: "JSON Minifier", url: "/json", type: "MIN" },
  { name: "XML Formatter", url: "/xml", type: "FMT" },
  { name: "XML Minifier", url: "/xml", type: "MIN" },
  { name: "YAML Formatter", url: "/yaml", type: "FMT" },
  { name: "SQL Formatter", url: "/sql", type: "FMT" },
  { name: "Go Formatter", url: "/go", type: "FMT" },
  { name: "Dart Formatter", url: "/dart", type: "FMT" },
  { name: "SCSS Formatter", url: "/scss", type: "FMT" },
  { name: "SCSS Minifier", url: "/scss", type: "MIN" },
  { name: "Java Formatter", url: "/java", type: "FMT" },
  { name: "Lua Formatter", url: "/lua", type: "FMT" },
  { name: "Python Formatter", url: "/python", type: "FMT" },
  { name: "TS Formatter", url: "/typescript", type: "FMT" },
  { name: "TS Validator", url: "/typescript", type: "VAL" },
  { name: "Markdown", url: "/markdown", type: "FMT" },
  { name: "C# Formatter", url: "/csharp", type: "FMT" },
  { name: "C Formatter", url: "/c", type: "FMT" },
  { name: "C++ Formatter", url: "/cpp", type: "FMT" },
  { name: "PHP Formatter", url: "/php", type: "FMT" },
  { name: "Proto Formatter", url: "/proto", type: "FMT" },
  { name: "Zig Formatter", url: "/zig", type: "FMT" },
];
---

<div
  class="border-t-2 border-foreground bg-foreground text-background py-16"
  id="more-tools"
>
  <div class="container mx-auto px-4">
    <div class="flex items-center justify-between mb-8">
      <h2 class="text-3xl font-display font-black uppercase tracking-tight text-background dark:text-background">
        System Modules <span class="text-primary">({tools.length})</span>
      </h2>
      <div class="hidden md:flex gap-2">
        <span class="w-3 h-3 bg-white rounded-full"></span>
        <span class="w-3 h-3 bg-primary rounded-full animate-pulse"></span>
      </div>
    </div>

    <!-- The Module Grid -->
    <!-- We use a background color of 'foreground' (black) and a gap of 1px to create the grid lines -->
    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 bg-zinc-800 dark:bg-zinc-900 border-2 border-white/20 dark:border-white/10 gap-px">
      {tools.map((tool) => {
        const cleanName = tool.name.replace("Formatter", "").replace("Minifier", "")
          .trim();
        return (
          <a
            href={tool.url}
            class="tool group relative bg-black dark:bg-zinc-950 p-6 hover:bg-white hover:dark:bg-zinc-100 transition-colors duration-200 flex flex-col justify-between h-32 overflow-hidden"
          >
            <!-- Background Icon Faded -->
            <div class="absolute bottom-2 right-2 opacity-15 grayscale transition-opacity">
              <LanguageIcon
                icon={tool.url.replace("/", "")}
                class="w-16 h-16"
              />
            </div>

            <!-- Header -->
            <div class="flex justify-between items-start">
              <span
                class="text-[10px] font-mono font-bold text-primary border border-primary px-1"
              >
                {tool.type}
              </span>
              <span
                class="text-accent group-hover:text-accent/80 dark:group-hover:text-accent/70 opacity-50 group-hover:opacity-100 transition-opacity"
                style="color: inherit !important"
              >â†—</span>
            </div>

            <!-- Label -->
            <div class="relative z-10">
              <span
                class="block text-lg font-bold font-display uppercase tracking-wider text-white dark:text-zinc-100 group-hover:text-black group-hover:dark:text-zinc-900"
              >
                {cleanName}
              </span>
              <span
                class="text-[10px] font-mono text-zinc-500 dark:text-zinc-600 group-hover:text-zinc-800 group-hover:dark:text-zinc-700"
              >
                {tool.name.includes("Minifier") ? "Compression" : "Standardization"}
              </span>
            </div>
          </a>
        );
      })}
    </div>

    <div class="mt-4 text-right font-mono text-[10px] text-zinc-500 dark:text-zinc-600">
      SYSTEM STATUS: ALL SYSTEMS OPERATIONAL
    </div>
  </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const tools = document.querySelectorAll(".tool");
  tools.forEach((tool) => {
    const toolName = tool.getAttribute("href")?.replace("/", "") || "";

    tool.addEventListener("click", () => {
      if (typeof window.gtag === "function") {
        window.gtag("event", `Click ${toolName}`, {
          "event_category": "Tool Interaction",
          "value": toolName,
        });
      }
    });
  });
});
</script>
