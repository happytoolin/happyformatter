---
interface BreadcrumbItem {
  name: string;
  url: string;
}

interface Props {
  items: BreadcrumbItem[];
  current?: string;
}

const { items, current } = Astro.props;

// Generate breadcrumb list schema
const breadcrumbList = {
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": items.map((item, index) => ({
    "@type": "ListItem",
    "position": index + 1,
    "name": item.name,
    "item": item.url,
  })),
};

// Don't include current page in schema (it's implied)
if (current) {
  breadcrumbList.itemListElement.push({
    "@type": "ListItem",
    "position": items.length + 1,
    "name": current,
  });
}
---

<!-- Structured Data -->
<script
  type="application/ld+json"
  set:html={JSON.stringify(breadcrumbList, null, 2)}
>
</script>

<!-- Visual Breadcrumbs -->
<nav aria-label="Breadcrumb" class="py-4 px-4">
  <ol class="flex items-center space-x-2 text-sm text-muted-foreground max-w-6xl mx-auto">
    {items.map((item, index) => (
      <>
        <li>
          <a
            href={item.url}
            class="hover:text-foreground transition-colors duration-200 hover:underline"
          >
            {item.name}
          </a>
        </li>
        <li class="text-foreground/40">/</li>
      </>
    ))}
    {current && (
      <li class="text-foreground font-medium">
        {current}
      </li>
    )}
  </ol>
</nav>

<style>
@media (max-width: 640px) {
  nav {
    overflow-x: auto;
    white-space: nowrap;
  }
  ol {
    min-width: max-content;
  }
}
</style>
