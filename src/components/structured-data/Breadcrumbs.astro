---
interface BreadcrumbItem {
  name: string;
  url: string;
}

interface Props {
  items: BreadcrumbItem[];
  current?: string;
}

const { items, current } = Astro.props;

const breadcrumbList = {
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": items.map((item, index) => ({
    "@type": "ListItem",
    "position": index + 1,
    "name": item.name,
    "item": item.url,
  })),
};
// Add current page as final breadcrumb (item URL is omitted for the active page per schema.org convention)
if (current) {
  breadcrumbList.itemListElement.push(
    {
      "@type": "ListItem",
      "position": items.length + 1,
      "name": current,
      "item": current,
    } as const,
  );
}
---

<script
  type="application/ld+json"
  set:html={JSON.stringify(breadcrumbList, null, 2)}
>
</script>

<style>
@media (max-width: 640px) {
  nav {
    overflow-x: auto;
    white-space: nowrap;
  }
  ol {
    min-width: max-content;
  }
}
</style>
