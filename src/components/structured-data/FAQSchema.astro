---
import { accordionData } from "@/components/faq/data.ts";

interface Props {
  language: string;
  url?: string;
}

const { language, url = Astro.url } = Astro.props;

// Get FAQ data for the specific language
const faqData = accordionData[language] || [];

if (faqData.length === 0) {
  // Don't render anything if no FAQ data
  return;
}

// Transform FAQ data into schema format (limit to first 3 for testing)
const mainEntity = faqData.slice(0, 3).map(item => ({
  "@type": "Question",
  "name": item.title,
  "acceptedAnswer": {
    "@type": "Answer",
    "text": item.content,
  },
}));

const schema = {
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "name": `Frequently Asked Questions - ${
    language.charAt(0).toUpperCase() + language.slice(1)
  } Code Formatter`,
  "description":
    `Common questions and answers about ${language} code formatting, privacy, and features on HappyFormatter`,
  "url": url.href,
  "mainEntity": mainEntity,
};
---

<script type="application/ld+json" set:html={JSON.stringify(schema)}></script>
