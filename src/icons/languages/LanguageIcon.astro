---
export interface Props {
  icon: string;
  class?: string;
}

const { icon, ...attributes } = Astro.props as Props;

// Fallback mapping for alternative formatters to base language icons
const fallbackMap: Record<string, string> = {
  "javascript-minify": "javascript",
  "typescript-minify": "typescript",
  "javascript-biome": "javascript",
  "typescript-biome": "typescript",
  "python-ruff": "python",
  "php-mago": "php",
  "css-minify": "css",
  "scss-minify": "scss",
  "json-minify": "json",
  "xml-minify": "xml",
  "prisma": "prisma",
};

const iconToUse = fallbackMap[icon] || icon;

let innerHTML;
try {
  const iconModule = await import(`./${iconToUse}.svg?raw`);
  innerHTML = iconModule.default;
} catch (error) {
  // Fallback to generic file icon if specific icon doesn't exist
  const fallbackModule = await import(`./javascript.svg?raw`);
  innerHTML = fallbackModule.default;
}
---

<Fragment {...attributes} set:html={innerHTML} />
